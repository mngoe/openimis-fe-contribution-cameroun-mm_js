{"version":3,"file":"index.es.js","sources":["../src/constants.js","../src/pickers/PaymentOperatorPicker.js","../src/actions.js","../src/components/ContributionMasterPanel.js","../src/components/SaveContributionDialog.js","../src/components/ContributionForm.js","../src/pages/ContributionPage.js","../src/pages/ContributionOverviewPage.js","../src/index.js"],"sourcesContent":["export const RIGHT_CONTRIBUTION = 101301 // supposed to be 101300 ... but in practice\nexport const RIGHT_CONTRIBUTION_SEARCH = 101301\nexport const RIGHT_CONTRIBUTION_ADD = 101302\nexport const RIGHT_CONTRIBUTION_EDIT = 101303\nexport const RIGHT_CONTRIBUTION_DELETE = 101304\n\nexport const PREMIUM_PAYMENT_TYPES = [\"C\", \"B\", \"M\"];\nexport const PREMIUM_CATEGORIES = [\"contribution\", \"photoFee\"];\nexport const PAYMENT_OPERATORS = [\"O\", \"M\"]","import React, { Component } from \"react\";\nimport { ConstantBasedPicker } from \"@openimis/fe-core\";\n\nimport { PAYMENT_OPERATORS } from \"../constants\";\n\nclass PaymentOperatorPicker extends Component {\n\n    render() {\n        return <ConstantBasedPicker\n            module=\"contribution\"\n            label=\"Payment.operator\"\n            constants={PAYMENT_OPERATORS}\n            {...this.props}\n        />\n    }\n}\n\nexport default PaymentOperatorPicker;","import {\n    graphql,\n    formatPageQuery,\n    formatPageQueryWithCount,\n    formatMutation,\n    formatJsonField,\n    formatGQLString,\n  } from \"@openimis/fe-core\";\n  import _ from \"lodash\";\n  import _uuid from \"lodash-uuid\";\n  \n  const CONTRIBUTION_FULL_PROJECTION = mm => [\n    \"id\",\n    \"uuid\",\n    \"payDate\",\n    \"amount\",\n    \"payType\",\n    \"receipt\",\n    \"isPhotoFee\",\n    \"clientMutationId\",\n    `payer${mm.getProjection(\"payer.PayerPicker.projection\")}`,\n    `policy${mm.getProjection(\"policy.PolicyPicker.projection\")}`,\n    \"networkOperator\",\n    \"paymentNumber\"\n  ];\n  \n  export function fetchPoliciesPremiums(mm, filters) {\n    let payload = formatPageQueryWithCount(\"premiumsByPolicies\",\n      filters,\n      [\n        \"id\", \"uuid\", \"payDate\",\n        `payer${mm.getProjection(\"payer.PayerPicker.projection\")}`,\n        \"amount\", \"payType\", \"receipt\", \"isPhotoFee\"]\n    );\n    return graphql(payload, 'CONTRIBUTION_POLICES_PREMIUMS');\n  }\n  \n  export function fetchContributionsSummaries(mm, filters) {\n    let projections = [\n      \"id\",\n      \"uuid\",\n      \"payDate\",\n      \"amount\",\n      \"payType\",\n      \"receipt\",\n      \"isPhotoFee\",\n      \"clientMutationId\",\n      \"validityTo\",\n      `payer${mm.getProjection(\"payer.PayerPicker.projection\")}`,\n    ];\n    const payload = formatPageQueryWithCount(\"premiums\",\n      filters,\n      projections\n    );\n    return graphql(payload, 'CONTRIBUTION_CONTRIBUTIONS');\n  }\n  \n  \n  export function selectPremium(premium) {\n    return dispatch => {\n      dispatch({ type: 'CONTRIBUTION_PREMIUM', payload: premium })\n    }\n  }\n  \n  export function formatContributionGQL(mm, contribution) {\n    const req = `\n      ${contribution.uuid !== undefined && contribution.uuid !== null ? `uuid: \"${contribution.uuid}\"` : ''}\n      ${!!contribution.receipt ? `receipt: \"${formatGQLString(contribution.receipt)}\"` : \"\"}\n      ${!!contribution.payDate ? `payDate: \"${contribution.payDate}\"` : \"\"}\n      ${!!contribution.payType ? `payType: \"${contribution.payType}\"` : \"\"}\n      ${`isPhotoFee: ${contribution.isPhotoFee}`}\n      ${!!contribution.action ? `action: \"${contribution.action}\"` : \"\"}\n      ${!!contribution.amount ? `amount: \"${contribution.amount}\"` : \"\"}\n      ${!!contribution.payer ? `payerUuid: \"${contribution.payer.uuid}\"` : \"\"}\n      ${!!contribution.jsonExt ? `jsonExt: ${formatJsonField(contribution.jsonExt)}` : \"\"}\n      ${!!contribution.policy ? `policyUuid: \"${formatGQLString(contribution.policy.uuid)}\"` : \"\"}\n      ${!!contribution.networkOperator ? `networkOperator: \"${contribution.networkOperator}\"` : \"\"}\n      ${!!contribution.paymentNumber ? `paymentNumber: \"${contribution.paymentNumber}\"` : \"\"}\n    `\n    return req;\n  }\n  export function fetchPolicySummary(\n    mm,\n    policyUuid,\n  ) {\n    let filters = []\n    if (!!policyUuid) {\n      filters.push(`uuid: \"${policyUuid}\"`)\n    }\n    const payload = formatPageQuery(\"policies\",\n      filters,\n      [\"id\", \"uuid\", \"startDate\", \"product{name}\", \"expiryDate\", \"value\"],\n    );\n    return graphql(payload, 'CONTRIBUTION_POLICY_SUMMARY');\n  }\n  \n  export function fetchContribution(\n    mm,\n    contributionUuid,\n    clientMutationId\n  ) {\n    let filters = []\n    if (!!contributionUuid) {\n      filters.push(`uuid: \"${contributionUuid}\"`)\n    } else if (!!clientMutationId) {\n      filters.push(`clientMutationId: \"${clientMutationId}\"`)\n    }\n    const payload = formatPageQuery(\"premiums\",\n      filters,\n      CONTRIBUTION_FULL_PROJECTION(mm)\n    );\n    return graphql(payload, 'CONTRIBUTION_OVERVIEW',\n      {\n        clientMutationId: !contributionUuid && clientMutationId,\n      });\n  }\n  \n  export function newContribution() {\n    return dispatch => {\n      dispatch({ type: 'CONTRIBUTION_NEW' })\n    }\n  }\n  \n  export function createContribution(mm, contribution, clientMutationLabel) {\n    let mutation = formatMutation(\"createPremium\", formatContributionGQL(mm, contribution), clientMutationLabel);\n    var requestedDateTime = new Date();\n    return graphql(\n      mutation.payload,\n      ['CONTRIBUTION_MUTATION_REQ', 'CONTRIBUTION_CREATE_RESP', 'CONTRIBUTION_MUTATION_ERR'],\n      {\n        clientMutationId: mutation.clientMutationId,\n        clientMutationLabel,\n        requestedDateTime\n      }\n    )\n  }\n  \n  export function updateContribution(mm, contribution, clientMutationLabel) {\n    let mutation = formatMutation(\"updatePremium\", formatContributionGQL(mm, contribution), clientMutationLabel);\n    var requestedDateTime = new Date();\n    return graphql(\n      mutation.payload,\n      ['CONTRIBUTION_MUTATION_REQ', 'CONTRIBUTION_UPDATE_RESP', 'CONTRIBUTION_MUTATION_ERR'],\n      {\n        clientMutationId: mutation.clientMutationId,\n        clientMutationLabel,\n        requestedDateTime,\n        contributionUuid: contribution.uuid,\n      }\n    )\n  }\n  \n  \n  export function deleteContribution(mm, contribution, clientMutationLabel) {\n    let mutation = formatMutation(\"deletePremium\", `uuids: [\"${contribution.uuid}\"]`, clientMutationLabel);\n    contribution.clientMutationId = mutation.clientMutationId;\n    var requestedDateTime = new Date();\n    return graphql(\n      mutation.payload,\n      ['CONTRIBUTION_MUTATION_REQ', 'CONTRIBUTION_DELETE_RESP', 'CONTRIBUTION_MUTATION_ERR'],\n      {\n        clientMutationId: mutation.clientMutationId,\n        clientMutationLabel,\n        requestedDateTime,\n        contributionUuid: contribution.uuid,\n      }\n    )\n  }","import React, { Fragment } from \"react\";\nimport { withTheme, withStyles } from \"@material-ui/core/styles\";\nimport { injectIntl } from 'react-intl';\nimport {\n    Grid,\n} from \"@material-ui/core\";\nimport {\n    withHistory,\n    withModulesManager,\n    AmountInput,\n    TextInput,\n    PublishedComponent,\n    FormPanel,\n    NumberInput\n} from \"@openimis/fe-core\";\n\n\nconst styles = theme => ({\n    tableTitle: theme.table.title,\n    item: theme.paper.item,\n    fullHeight: {\n        height: \"100%\"\n    },\n});\n\nclass ContributionMasterPanel extends FormPanel {\n    render() {\n        const {\n            classes,\n            edited,\n            readOnly,\n        } = this.props;\n        return (\n            <Fragment>\n                {!!edited && !!edited.policy && !!edited.policy.value && (\n                    <Grid container className={classes.item}>\n                        <Grid item xs={3} className={classes.item}>\n                            <TextInput\n                                module=\"contribution\"\n                                label=\"contribution.policy.name\"\n                                readOnly={true}\n                                value={(edited.policy.product && edited.policy.product.name) || \"\"}\n                            />\n                        </Grid>\n                        <Grid item xs={3} className={classes.item}>\n                            <AmountInput\n                                module=\"contribution\"\n                                label=\"contribution.policy.value\"\n                                required\n                                readOnly={true}\n                                value={edited.policy.value || \"\"}\n                            />\n                        </Grid>\n                        <Grid item xs={3} className={classes.item}>\n                            <PublishedComponent pubRef=\"core.DatePicker\"\n                                value={edited.policy.startDate || \"\"}\n                                module=\"contribution\"\n                                label=\"contribution.policy.startDate\"\n                                readOnly={true}\n                            />\n                        </Grid>\n                        <Grid item xs={3} className={classes.item}>\n                            <PublishedComponent pubRef=\"core.DatePicker\"\n                                value={edited.policy.expiryDate || \"\"}\n                                module=\"contribution\"\n                                label=\"contribution.policy.expiryDate\"\n                                readOnly={true}\n                            />\n                        </Grid>\n                    </Grid>\n                )}\n                <Grid container className={classes.item}>\n                    <Grid item xs={3} className={classes.item}>\n                        <PublishedComponent pubRef=\"core.DatePicker\"\n                            value={!edited ? \"\" : edited.payDate}\n                            module=\"contribution\"\n                            required\n                            label=\"contribution.payDate\"\n                            readOnly={readOnly}\n                            onChange={c => this.updateAttribute('payDate', c)}\n                        />\n                    </Grid>\n                    <Grid item xs={3} className={classes.item}>\n                        <PublishedComponent\n                            pubRef=\"payer.PayerPicker\"\n                            withNull={true}\n                            readOnly={readOnly}\n                            value={!edited ? \"\" : edited.payer}\n                            onChange={p => this.updateAttribute('payer', p)}\n                        />\n                    </Grid>\n                    <Grid item xs={3} className={classes.item}>\n                        <AmountInput\n                            module=\"contribution\"\n                            label=\"contribution.amount\"\n                            required\n                            readOnly={readOnly}\n                            value={!edited ? \"\" : edited.amount}\n                            onChange={c => this.updateAttribute('amount', c)}\n                        />\n                    </Grid>\n                    <Grid item xs={3} className={classes.item}>\n                        <PublishedComponent\n                            pubRef=\"contribution.PremiumPaymentTypePicker\"\n                            withNull={true}\n                            required\n                            readOnly={readOnly}\n                            value={!edited ? \"\" : edited.payType}\n                            onChange={c => this.updateAttribute('payType', c)}\n                        />\n                    </Grid>\n                    {!!edited && edited.payType == 'M' && (\n                        <Grid item xs={3} className={classes.item}>\n                            <PublishedComponent\n                                pubRef=\"contribution.PaymentOperatorPicker\"\n                                withNull={true}\n                                required\n                                readOnly={readOnly}\n                                value={!edited ? \"\" : edited.networkOperator}\n                                onChange={c => this.updateAttribute('networkOperator', c)}\n                            />\n                        </Grid>\n                    )\n                    }\n                    {!!edited && edited.payType == 'M' && (\n                        <Grid item xs={3} className={classes.item}>\n                            <NumberInput\n                                module=\"contribution\"\n                                label=\"Payment.paymentNumber\"\n                                required\n                                readOnly={readOnly}\n                                value={!!edited && !!edited.paymentNumber ? edited.paymentNumber : \"\"}\n                                onChange={(v) => this.updateAttribute(\"paymentNumber\", v)}\n                            />\n                        </Grid>\n                    )\n                    }\n                    <Grid item xs={3} className={classes.item}>\n                        <TextInput\n                            module=\"contribution\"\n                            label=\"contribution.receipt\"\n                            required\n                            readOnly={readOnly}\n                            value={!edited ? \"\" : edited.receipt}\n                            onChange={c => this.updateAttribute('receipt', c)}\n                        />\n                    </Grid>\n                    <Grid item xs={3} className={classes.item}>\n                        <PublishedComponent\n                            pubRef=\"contribution.PremiumCategoryPicker\"\n                            withNull={false}\n                            readOnly={readOnly}\n                            value={edited && edited.isPhotoFee ? 'photoFee' : 'contribution'}\n                            onChange={c => {\n                                return this.updateAttribute('isPhotoFee', c === 'photoFee');\n                            }}\n                        />\n                    </Grid>\n                </Grid>\n            </Fragment>\n        );\n    }\n}\n\nexport default withModulesManager(withHistory(injectIntl(withTheme(\n    withStyles(styles)(ContributionMasterPanel)\n))));","import React, { useState } from \"react\";\nimport { injectIntl } from 'react-intl';\nimport { withTheme, withStyles } from \"@material-ui/core/styles\";\n\nconst styles = theme => ({\n    primaryButton: theme.dialog.primaryButton,\n    secondaryButton: theme.dialog.secondaryButton,\n})\n\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle\n} from '@material-ui/core';\n\nimport { FormattedMessage } from \"@openimis/fe-core\";\n\nconst SaveContributionDialog = ({\n    classes, contribution, onCancel, onConfirm\n}) => {\n    if (!contribution.policy || !contribution.policy.value) return null;\n    const [step, setStep] = useState(1);\n    const amount = parseInt(contribution.amount, 10);\n    const policyValue = parseInt(contribution.policy.value, 10);\n    return (\n        <Dialog\n            open={!!contribution}\n            onClose={onCancel}\n        >\n            <DialogTitle>\n                <FormattedMessage\n                    module=\"contribution\"\n                    id=\"saveContributionDialog.title\"\n                />\n            </DialogTitle>\n            <DialogContent>\n                {\n                    amount < policyValue && (\n                        <>\n                            {\n                                step === 1 && (\n                                    <DialogContentText>\n                                        <FormattedMessage\n                                            module=\"contribution\"\n                                            id=\"saveContributionDialog.messageLower\"\n                                        />\n                                    </DialogContentText>\n                                )\n                            }\n                            {\n                                step === 2 && (\n                                    <DialogContentText>\n                                        <FormattedMessage\n                                            module=\"contribution\"\n                                            id=\"saveContributionDialog.messageLowerConfirm\"\n                                        />\n                                    </DialogContentText>\n                                )\n                            }\n                        </>\n                    )\n                }\n                {\n                    amount >= policyValue && (\n                        <DialogContentText>\n                            {\n                                amount === policyValue && (\n                                    <FormattedMessage\n                                        module=\"contribution\"\n                                        id=\"saveContributionDialog.messageEqual\"\n                                    />\n                                )\n                            }\n                            {\n                                amount > policyValue && (\n                                    <FormattedMessage\n                                        module=\"contribution\"\n                                        id=\"saveContributionDialog.messageHigher\"\n                                    />\n                                )\n                            }\n                        </DialogContentText>\n                    )\n                }\n            </DialogContent>\n            <DialogActions>\n\n                {\n                    amount >= policyValue && (\n                        <Button onClick={e => onConfirm()} className={classes.primaryButton} autoFocus>\n                            <FormattedMessage module=\"contribution\" id=\"saveContributionDialog.ok.button\" />\n                        </Button>\n                    )\n                }\n\n                {\n                    amount < policyValue && (\n                        <>\n                            {\n                                step === 1 && (\n                                    <Button onClick={e => setStep(2)} className={classes.primaryButton} autoFocus>\n                                        <FormattedMessage module=\"contribution\" id=\"saveContributionDialog.ok.button\" />\n                                    </Button>\n                                )\n                            }\n                            {\n                                step === 2 && (\n                                    <>\n                                        <Button onClick={e => onConfirm('ENFORCE')} className={classes.primaryButton} autoFocus>\n                                            <FormattedMessage module=\"contribution\" id=\"saveContributionDialog.yes.button\" />\n                                        </Button>\n                                        <Button onClick={e => onConfirm('WAIT')} className={classes.primaryButton} autoFocus>\n                                            <FormattedMessage module=\"contribution\" id=\"saveContributionDialog.no.button\" />\n                                        </Button>\n                                    </>\n                                )\n                            }\n                        </>\n                    )\n                }\n                {\n                    step === 1 && (\n                        <Button onClick={onCancel} className={classes.secondaryButton} >\n                            <FormattedMessage module=\"core\" id=\"cancel\"/>\n                        </Button>\n                    )\n                }\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport default injectIntl(withTheme(withStyles(styles)(SaveContributionDialog)));\n","import React, { Component } from \"react\";\nimport { injectIntl } from 'react-intl';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTheme, withStyles } from \"@material-ui/core/styles\";\nimport ReplayIcon from \"@material-ui/icons/Replay\"\nimport {\n    formatMessageWithValues, withModulesManager, withHistory,\n    Form, ProgressOrError, journalize, coreConfirm, Helmet\n} from \"@openimis/fe-core\";\nimport { RIGHT_CONTRIBUTION } from \"../constants\";\n\nimport { fetchContribution, newContribution, createContribution, fetchPolicySummary } from \"../actions\";\nimport ContributionMasterPanel from \"./ContributionMasterPanel\";\nimport SaveContributionDialog from \"./SaveContributionDialog\";\n\nconst styles = theme => ({\n    lockedPage: theme.page.locked\n});\n\nconst CONTRIBUTION_OVERVIEW_MUTATIONS_KEY = \"contribution.ContributionOverview.mutations\"\n\nclass ContributionForm extends Component {\n    _newContribution = () => ({\n        isPhotoFee: false\n    });\n\n    state = {\n        reset: 0,\n        update: false,\n        contribution: this._newContribution(),\n        newContribution: true,\n        saveContribution: false,\n    }\n\n    componentDidMount() {\n        const {\n            contribution_uuid,\n            policy_uuid,\n            modulesManager,\n            fetchContribution,\n            fetchPolicySummary,\n        } = this.props;\n\n        if (contribution_uuid) {\n            this.setState(\n                (state, props) => (\n                    { contribution_uuid: props.contribution_uuid }\n                ),\n                e => fetchContribution(\n                    modulesManager,\n                    contribution_uuid\n                )\n            )\n        }\n        if (policy_uuid) {\n            fetchPolicySummary(modulesManager, policy_uuid);\n            this.setState({\n                contribution: {\n                    ... this._newContribution(),\n                    policy: {\n                        uuid: policy_uuid,\n                        value: undefined,\n                    },\n                },\n            });\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!prevProps.fetchedContribution && !!this.props.fetchedContribution) {\n            const { contribution } = this.props;\n            this.setState(\n                {\n                    contribution,\n                    contribution_uuid: contribution.uuid,\n                    newContribution: false\n                });\n        } else if (prevProps.contribution_uuid && !this.props.contribution_uuid) {\n            this.setState({ contribution: this._newContribution(), newContribution: true, contribution_uuid: null });\n        } else if (prevProps.submittingMutation && !this.props.submittingMutation) {\n            this.props.journalize(this.props.mutation);\n            this.setState((state, props) => ({\n                contribution: { ...state.contribution, clientMutationId: props.mutation.clientMutationId }\n            }));\n        } else if (prevProps.confirmed !== this.props.confirmed && !!this.props.confirmed && !!this.state.confirmedAction) {\n            this.state.confirmedAction();\n        }\n\n        if (!prevProps.policySummary && !!this.props.policySummary) {\n            this.setState(prevState => ({\n                contribution: {\n                    ...prevState.contribution,\n                    policy: this.props.policySummary,\n                },\n            }));\n        }\n    }\n\n\n    reload = () => {\n        const { contribution } = this.state;\n        this.props.fetchContribution(\n            this.props.modulesManager,\n            this.state.contribution_uuid,\n            contribution.clientMutationId\n        );\n    }\n\n    canSave = () => {\n        const { contribution } = this.state;\n        if (!contribution ||\n            (contribution && (\n                !contribution.payDate ||\n                !contribution.payType ||\n                (contribution.payType == 'M' && (!contribution.networkOperator || !contribution.paymentNumber)) ||\n                !contribution.amount ||\n                !contribution.receipt ||\n                !contribution.policy ||\n                (contribution.policy && !contribution.policy.uuid)\n            ))) return false;\n        return true;\n    }\n\n    confirmSave = () => {\n        this.setState(\n            { saveContribution: true },\n        );\n    }\n\n    _save = (action) => {\n        this.setState(prevState => {\n            const { contribution } = prevState;\n            if (!!action) {\n                contribution.action = action;\n            }\n            this.props.save(contribution);\n            return (\n                {\n                    saveContribution: false,\n                }\n            );\n        },\n        );\n    }\n\n    onEditedChanged = contribution => {\n        this.setState({ contribution, newContribution: false })\n    }\n\n    onActionToConfirm = (title, message, confirmedAction) => {\n        this.setState(\n            { confirmedAction },\n            this.props.coreConfirm(\n                title,\n                message\n            )\n        )\n    }\n\n    _cancelSave() {\n        const { update } = this.state;\n        this.setState(\n            {\n                saveContribution: false,\n                update: !update,\n            },\n        );\n    }\n\n    render() {\n        const {\n            modulesManager,\n            classes,\n            state,\n            rights,\n            contribution_uuid,\n            fetchingContribution,\n            fetchedContribution,\n            errorContribution,\n            overview = false,\n            readOnly = false,\n            save,\n            back,\n        } = this.props;\n        const { contribution, saveContribution, newContribution, reset, update } = this.state;\n        if (!rights.includes(RIGHT_CONTRIBUTION)) return null;\n        let runningMutation = !!contribution && !!contribution.clientMutationId\n        let contributedMutations = modulesManager.getContribs(CONTRIBUTION_OVERVIEW_MUTATIONS_KEY);\n        for (let i = 0; i < contributedMutations.length && !runningMutation; i++) {\n            runningMutation = contributedMutations[i](state)\n        }\n        const actions = [{\n            doIt: this.reload,\n            icon: <ReplayIcon />,\n            onlyIfDirty: !readOnly && !runningMutation\n        }];\n        return (\n            <div className={!!runningMutation ? classes.lockedPage : null}>\n                <Helmet title={formatMessageWithValues(this.props.intl, \"contribution\", \"ContributionOverview.title\")} />\n                <SaveContributionDialog\n                    contribution={saveContribution && contribution}\n                    onConfirm={this._save}\n                    onCancel={() => this._cancelSave()} />\n                <ProgressOrError progress={fetchingContribution} error={errorContribution} />\n                {((!!fetchedContribution && !!contribution && contribution.uuid === contribution_uuid) || !contribution_uuid) && (\n                    <Form\n                        module=\"contribution\"\n                        title={!!newContribution ? \"ContributionOverview.newTitle\" : \"ContributionOverview.title\"}\n                        edited_id={contribution_uuid}\n                        edited={contribution}\n                        reset={reset}\n                        back={back}\n                        // add={!!add && !newContribution ? this._add : null}\n                        readOnly={readOnly || runningMutation || contribution && !!contribution.validityTo}\n                        actions={actions}\n                        overview={overview}\n                        HeadPanel={ContributionMasterPanel}\n                        contribution={contribution}\n                        onEditedChanged={this.onEditedChanged}\n                        canSave={this.canSave}\n                        save={!!save ? this.confirmSave : null}\n                        update={update}\n                        onActionToConfirm={this.onActionToConfirm}\n                    />\n                )}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state, props) => ({\n    rights: !!state.core && !!state.core.user && !!state.core.user.i_user ? state.core.user.i_user.rights : [],\n    fetchingContribution: state.contribution.fetchingContribution,\n    errorContribution: state.contribution.errorContribution,\n    fetchedContribution: state.contribution.fetchedContribution,\n    submittingMutation: state.contribution.submittingMutation,\n    policySummary: state.contribution.policySummary,\n    mutation: state.contribution.mutation,\n    contribution: state.contribution.contribution,\n    confirmed: state.core.confirmed,\n    state: state,\n})\n\nconst mapDispatchToProps = dispatch => {\n    return bindActionCreators({\n        fetchContribution,\n        fetchPolicySummary,\n        newContribution,\n        createContribution,\n        journalize,\n        coreConfirm,\n    }, dispatch);\n};\n\nexport default withHistory(withModulesManager(connect(mapStateToProps, mapDispatchToProps)(\n    injectIntl(withTheme(withStyles(styles)(ContributionForm))\n    ))));","import React, { Component } from \"react\";\nimport { injectIntl } from 'react-intl';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { withTheme, withStyles } from \"@material-ui/core/styles\";\nimport {\n    formatMessageWithValues, withModulesManager, withHistory,\n} from \"@openimis/fe-core\";\nimport ContributionForm from \"../components/ContributionForm\";\nimport { createContribution, updateContribution } from \"../actions\";\nimport { RIGHT_CONTRIBUTION_EDIT } from \"../constants\";\n\nconst styles = theme => ({\n    page: theme.page,\n});\n\nclass ContributionPage extends Component {\n\n\n    save = (contribution) => {\n        if (!contribution.uuid) {\n            this.props.createContribution(\n                this.props.modulesManager,\n                contribution,\n                formatMessageWithValues(\n                    this.props.intl,\n                    \"contribution\",\n                    \"CreateContribution.mutationLabel\",\n                )\n            );\n        } else {\n            this.props.updateContribution(\n                this.props.modulesManager,\n                contribution,\n                formatMessageWithValues(\n                    this.props.intl,\n                    \"contribution\",\n                    \"UpdateContribution.mutationLabel\",\n                )\n            );\n\n        }\n    }\n\n    render() {\n        const { classes, rights, contribution_uuid,policy_uuid, overview } = this.props;\n        if (!rights.includes(RIGHT_CONTRIBUTION_EDIT)) return null;\n\n        return (\n            <div className={classes.page}>\n                <ContributionForm\n                    overview={overview}\n                    contribution_uuid={contribution_uuid}\n                    policy_uuid={policy_uuid}\n                    back={e => {\n                        window.history.back();\n                    }}\n                    save={rights.includes(RIGHT_CONTRIBUTION_EDIT) ? this.save : null}\n                />\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state, props) => ({\n    rights: !!state.core && !!state.core.user && !!state.core.user.i_user ? state.core.user.i_user.rights : [],\n    contribution_uuid: props.match.params.contribution_uuid,\n    policy_uuid: props.match.params.policy_uuid,\n})\n\nconst mapDispatchToProps = dispatch => {\n    return bindActionCreators({ createContribution, updateContribution }, dispatch);\n};\n\nexport default withHistory(withModulesManager(connect(mapStateToProps, mapDispatchToProps)(\n    injectIntl(withTheme(withStyles(styles)(ContributionPage))\n    ))));","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Edit as EditIcon } from \"@material-ui/icons\";\nimport { historyPush, withModulesManager, withHistory } from \"@openimis/fe-core\";\nimport ContributionPage from \"./ContributionPage\";\n\n\nclass ContributionOverviewPage extends Component {\n    render() {\n        const { history, modulesManager, contribution_uuid } = this.props;\n        var actions = [{\n            doIt: e => historyPush(modulesManager, history, \"contribution.contributionOverview\", [contribution_uuid]),\n            icon: <EditIcon />,\n            onlyIfDirty: false\n        }]\n        return <ContributionPage {...this.props} readOnly={true} overview={true} actions={actions} />\n    }\n}\n\nconst mapStateToProps = (state, props) => ({\n    contribution_uuid: props.match.params.contribution_uuid,\n})\n\nexport default withHistory(withModulesManager(connect(mapStateToProps)(ContributionOverviewPage)));","import PaymentOperatorPicker from \"./pickers/PaymentOperatorPicker\";\nimport messages_en from \"./translations/en.json\";\nimport messages_fr from \"./translations/fr.json\";\nimport ContributionPage from \"./pages/ContributionPage\";\nimport ContributionOverviewPage from \"./pages/ContributionOverviewPage\";\n\nimport { RIGHT_CONTRIBUTION } from \"./constants\";\n\nconst ROUTE_CONTRIBUTION_CONTRIBUTIONS = \"contribution/contributions\";\nconst ROUTE_CONTRIBUTION_CONTRIBUTION = \"contribution/new\";\nconst ROUTE_CONTRIBUTION_CONTRIBUTION_OVERVIEW = \"contribution/overview\";\n\nconst DEFAULT_CONFIG = {\n  \"translations\": [\n    { key: \"en\", messages: messages_en },\n    { key: \"fr\", messages: messages_fr }\n  ],\n\n  \"refs\": [\n    { key: \"contribution.PaymentOperatorPicker\", ref: PaymentOperatorPicker },\n  ],\n\n  \"core.Router\": [\n    { path: ROUTE_CONTRIBUTION_CONTRIBUTION + \"/:policy_uuid\", component: ContributionPage },\n    { path: ROUTE_CONTRIBUTION_CONTRIBUTION_OVERVIEW + \"/:contribution_uuid\", component: ContributionOverviewPage },\n  ],\n  \"insuree.MainMenu\": [\n    {\n      text: <FormattedMessage module=\"contribution\" id=\"menu.contributions\" />,\n      icon: <MonetizationOn />,\n      route: \"/\" + ROUTE_CONTRIBUTION_CONTRIBUTIONS,\n      filter: rights => rights.includes(RIGHT_CONTRIBUTION)\n    }\n  ],\n}\n\nexport const ContributionCmrModule = (cfg) => {\n  return { ...DEFAULT_CONFIG, ...cfg };\n}"],"names":["RIGHT_CONTRIBUTION","RIGHT_CONTRIBUTION_EDIT","PAYMENT_OPERATORS","PaymentOperatorPicker","_Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","render","React","createElement","ConstantBasedPicker","_extends","module","label","constants","props","Component","CONTRIBUTION_FULL_PROJECTION","mm","concat","getProjection","formatContributionGQL","contribution","req","uuid","undefined","receipt","formatGQLString","payDate","payType","isPhotoFee","action","amount","payer","jsonExt","formatJsonField","policy","networkOperator","paymentNumber","fetchPolicySummary","policyUuid","filters","push","payload","formatPageQuery","graphql","fetchContribution","contributionUuid","clientMutationId","newContribution","dispatch","type","createContribution","clientMutationLabel","mutation","formatMutation","requestedDateTime","Date","updateContribution","styles","theme","tableTitle","table","title","item","paper","fullHeight","height","ContributionMasterPanel","_FormPanel","_this","_this$props","classes","edited","readOnly","Fragment","Grid","container","className","xs","TextInput","product","name","AmountInput","required","PublishedComponent","pubRef","startDate","expiryDate","onChange","c","updateAttribute","withNull","p","NumberInput","v","FormPanel","withModulesManager","withHistory","injectIntl","withTheme","withStyles","primaryButton","dialog","secondaryButton","SaveContributionDialog","_ref","onCancel","onConfirm","_useState","useState","_useState2","_slicedToArray","step","setStep","parseInt","policyValue","Dialog","open","onClose","DialogTitle","FormattedMessage","id","DialogContent","DialogContentText","DialogActions","Button","onClick","e","autoFocus","lockedPage","page","locked","CONTRIBUTION_OVERVIEW_MUTATIONS_KEY","ContributionForm","_len","length","args","Array","_key","call","_defineProperty","_assertThisInitialized","reset","update","_newContribution","saveContribution","state","modulesManager","contribution_uuid","setState","prevState","save","message","confirmedAction","coreConfirm","componentDidMount","policy_uuid","_objectSpread","componentDidUpdate","prevProps","_this2","fetchedContribution","submittingMutation","journalize","confirmed","policySummary","_cancelSave","_this3","_this$props2","rights","fetchingContribution","errorContribution","_this$props2$overview","overview","_this$props2$readOnly","back","_this$state","includes","runningMutation","contributedMutations","getContribs","i","actions","doIt","reload","icon","ReplayIcon","onlyIfDirty","Helmet","formatMessageWithValues","intl","_save","ProgressOrError","progress","error","Form","edited_id","validityTo","HeadPanel","onEditedChanged","canSave","confirmSave","onActionToConfirm","mapStateToProps","core","user","i_user","mapDispatchToProps","bindActionCreators","connect","ContributionPage","window","history","match","params","ContributionOverviewPage","historyPush","EditIcon","ROUTE_CONTRIBUTION_CONTRIBUTIONS","ROUTE_CONTRIBUTION_CONTRIBUTION","ROUTE_CONTRIBUTION_CONTRIBUTION_OVERVIEW","DEFAULT_CONFIG","messages","messages_en","messages_fr","ref","path","component","text","MonetizationOn","route","filter","ContributionCmrModule","cfg"],"mappings":"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"}